<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
     <link rel="stylesheet" href="./third.css">
</head>
<body>

  <nav class="navbar bg-body-tertiary sticky-top ">
  <div class="container-fluid p-2">
    <a class="navbar-brand text-white" href="#">MEAL FINDER</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
      <div class="offcanvas-header">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" id="but"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a class="nav-link active" href="#" data-category="Beef">Beef</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Chicken">Chicken</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Dessert">Dessert</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Lamb">Lamb</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Miscellaneous">Miscellaneous</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Pasta">Pasta</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="pork">Pork</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" data-category="Seafood">Seafood</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Side">Side</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Starter">Starter</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Vegan">Vegan</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Vegetarian">Vegetarian</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Breakfast">Breakfast</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-category="Goat">Goat</a>
          </li>
          </ul>
      </div>
    </div>
  </div>
</nav> 
<div class="searchbar pt-5 position-relative">
  <div class="overlay position-absolute h-100"></div>
  <input type="text" name="text" class="inputs" placeholder="Search items-(Press Enter)......">
  <a href="./mealspage.html"></a>
  <i class="icon1 bi bi-search"></i>
  <h2>What are your favorite cuisines?</h2>
  <P>PERSONALIZE YOUR EXPERIENCE</P>
</div>
  

    <h2 class="heading1">Meal Details</h2>

    <div class="meal-container">
        <div id="mealDetails"></div>
    </div>



    <h2 class="section"> CATEGORIES</h2>
<div id="product"></div>

    <script>



const urlParams = new URLSearchParams(window.location.search);
const mealId = urlParams.get("id");

if (mealId) {
  fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`)
    .then(res => res.json())
    .then(data => {
      const m = data.meals[0];
      document.querySelector("#mealDetails").innerHTML = `
      <div class="mealspage">
      <div class="mealdetails">
        <div class="details">
        <img src="${m.strMealThumb}" alt="${m.strMeal}">
        </div>
        <div class="">
         <h2 class="heading">${m.strMeal}</h2>
        <p><strong>Category:</strong> ${m.strCategory}</p>
          ${m.strSource ? `<h6> Source: <a href="${m.strSource}" target="_blank">View Source</a></h6>` : ""}
          ${m.strYoutube ? `<h6>Youtube: <a href="${m.strYoutube}" target="_blank">Watch on YouTube</a></h6>` : ""}
        <h4>Ingredients:</h4>
        <ol type="1" class="list row row-cols-4 col-gap-5 row-g-5 ">
          ${getIngredientsList(m).map(i => `<li>${i}</li>`).join("")}
        </ol> 
        </div>
        </div>
        <h4>Instructions:</h4>
        <ul>
        <li>${m.strInstructions}</li>
        </ul>

        </div>
         
      `;
    })
    .catch(()=>{
        document.querySelector("#mealDetails").innerHTML="<p>Error loading meal details..</p>"
    });
}else{
    document.querySelector("#mealDetails").innerHTML="<p>No meal selected</p>"
}

function getIngredientsList(meal) {
  let ingredients = [];
  for (let i = 1; i <= 20; i++) {
    if (meal[`strIngredient${i}`]) {
      ingredients.push(`${meal[`strIngredient${i}`]} - ${meal[`strMeasure${i}`]}`);
    }
  }
  return ingredients;
}





   fetch("https://www.themealdb.com/api/json/v1/1/categories.php")
  .then((res)=>res.json())
  .then(data=>{
      const productcontainer=document.querySelector("#product")
      data.categories.forEach(prod => {
        const card = document.createElement("div")
        card.classList.add("product")
         card.setAttribute("data-category", prod.strCategory.toLowerCase());
        card.innerHTML=`
        <label>${prod.strCategory}</label>
        <img class="catimage" src=${prod.strCategoryThumb} alt="${prod.strCategory}"/>`;
        productcontainer.append(card);
        //---fetch details------

        card.addEventListener("click", ()=>{
          //  fetchMealsByCategory(prod.strCategory);
          categoryDetails.innerHTML=`
          <div class="discription mx-5">
          <h1 class="tittle2">${prod.strCategory}</h1>
          <p class="">${prod.strCategoryDescription}</p>
          </div>`;
          fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${prod.strCategory}`)
          .then(res=>res.json())
          .then(mealdata =>{

            mealslist.innerHTML=""
            mealdata.meals.forEach(meal=>{
              const mealcards= document.createElement("div")
              mealcards.classList.add("meal-cards");
              mealcards.innerHTML=`
              <img class="images" src="${meal.strMealThumb}" alt="${meal.strMeal}">
              <h4>${meal.strMeal.slice(0,15)}....</h4>
              `;
              mealslist.append(mealcards);
            });
          });
        });
        
      });
  })

    </script>




    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>